<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }

        .test {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ccc;
        }

        .success {
            background: #d4edda;
            border-color: #c3e6cb;
        }

        .error {
            background: #f8d7da;
            border-color: #f5c6cb;
        }

        .info {
            background: #d1ecf1;
            border-color: #bee5eb;
        }
    </style>
</head>

<body>
    <h1>Firebase Configuration Test</h1>
    <div id="results"></div>

    <script>
        function addResult(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `test ${type}`;
            div.innerHTML = message;
            document.getElementById('results').appendChild(div);
        }

        // Test 1: Check environment variables
        addResult('<strong>Test 1: Environment Variables</strong>');

        // Since this is frontend, we need to check the actual Firebase config
        fetch('/src/config/firebase.js')
            .then(response => response.text())
            .then(text => {
                if (text.includes('VITE_FIREBASE_')) {
                    addResult('✅ Firebase config file contains VITE_ variables', 'success');
                } else {
                    addResult('❌ Firebase config file missing VITE_ variables', 'error');
                }
            })
            .catch(err => {
                addResult('❌ Could not read Firebase config file: ' + err.message, 'error');
            });

        // Test 2: Check localStorage
        addResult('<strong>Test 2: LocalStorage Data</strong>');
        const viewData = localStorage.getItem('blog_article_views');
        if (viewData) {
            try {
                const parsed = JSON.parse(viewData);
                const count = Object.keys(parsed).length;
                addResult(`✅ Found ${count} articles in localStorage`, 'success');
                addResult(`Data: ${JSON.stringify(parsed, null, 2)}`, 'info');
            } catch (e) {
                addResult('❌ Invalid JSON in localStorage: ' + e.message, 'error');
            }
        } else {
            addResult('⚠️ No view data in localStorage', 'error');
        }

        // Test 3: Check for React app
        addResult('<strong>Test 3: React App Detection</strong>');
        setTimeout(() => {
            const reactRoot = document.querySelector('#root');
            if (reactRoot) {
                addResult('✅ React app root element found', 'success');
                if (reactRoot.children.length > 0) {
                    addResult('✅ React app appears to be loaded', 'success');
                } else {
                    addResult('⚠️ React app root is empty', 'error');
                }
            } else {
                addResult('❌ React app root element not found', 'error');
            }
        }, 1000);

        // Test 4: Console logs check
        addResult('<strong>Test 4: Browser Console</strong>');
        addResult('Check the browser console for any error messages from the React app', 'info');

        // Test 5: Network requests
        addResult('<strong>Test 5: Instructions</strong>');
        addResult('1. Visit the main homepage at http://localhost:5173', 'info');
        addResult('2. Check the debug boxes that should appear in the corners', 'info');
        addResult('3. Compare the data shown in HomePage vs Footer debug boxes', 'info');
        addResult('4. Look for differences in post counts or view counts', 'info');
    </script>
</body>

</html>